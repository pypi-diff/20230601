# Comparing `tmp/odoo10_addon_base_phone-10.0.0.1.0.99.dev3-py2-none-any.whl.zip` & `tmp/odoo10_addon_base_phone-10.0.0.1.0.99.dev9-py2-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,70 +1,71 @@
-Zip file size: 117023 bytes, number of entries: 68
--rw-r--r--  2.0 unx      669 b- defN 16-Dec-31 03:33 odoo10_addon_base_phone-10.0.0.1.0.99.dev3-py2.7-nspkg.pth
--rw-r--r--  2.0 unx     1735 b- defN 16-Dec-31 03:33 odoo/addons/base_phone/__manifest__.py
--rw-r--r--  2.0 unx     1906 b- defN 16-Dec-31 03:33 odoo/addons/base_phone/fields.py
--rw-r--r--  2.0 unx      497 b- defN 16-Dec-31 03:33 odoo/addons/base_phone/web_phone.xml
--rw-r--r--  2.0 unx      114 b- defN 16-Dec-31 03:33 odoo/addons/base_phone/__init__.py
+Zip file size: 117921 bytes, number of entries: 69
+-rw-r--r--  2.0 unx      669 b- defN 17-Jan-25 03:33 odoo10_addon_base_phone-10.0.0.1.0.99.dev9-py2.7-nspkg.pth
+-rw-r--r--  2.0 unx        5 b- defN 17-Jan-25 03:33 odoo10_addon_base_phone-10.0.0.1.0.99.dev9.dist-info/top_level.txt
+-rw-r--r--  2.0 unx       92 b- defN 17-Jan-25 03:33 odoo10_addon_base_phone-10.0.0.1.0.99.dev9.dist-info/WHEEL
+-rw-r--r--  2.0 unx     6846 b- defN 17-Apr-08 19:16 odoo10_addon_base_phone-10.0.0.1.0.99.dev9.dist-info/RECORD
+-rw-r--r--  2.0 unx      696 b- defN 17-Apr-08 19:16 odoo10_addon_base_phone-10.0.0.1.0.99.dev9.dist-info/metadata.json
+-rw-r--r--  2.0 unx     3406 b- defN 17-Jan-25 03:33 odoo10_addon_base_phone-10.0.0.1.0.99.dev9.dist-info/DESCRIPTION.rst
+-rw-r--r--  2.0 unx     3902 b- defN 17-Apr-08 19:16 odoo10_addon_base_phone-10.0.0.1.0.99.dev9.dist-info/METADATA
+-rw-r--r--  2.0 unx       17 b- defN 17-Jan-25 03:33 odoo10_addon_base_phone-10.0.0.1.0.99.dev9.dist-info/namespace_packages.txt
+-rw-r--r--  2.0 unx     1735 b- defN 17-Jan-25 03:33 odoo/addons/base_phone/__manifest__.py
+-rw-r--r--  2.0 unx     1906 b- defN 17-Jan-25 03:33 odoo/addons/base_phone/fields.py
+-rw-r--r--  2.0 unx      497 b- defN 17-Jan-25 03:33 odoo/addons/base_phone/web_phone.xml
+-rw-r--r--  2.0 unx      114 b- defN 17-Jan-25 03:33 odoo/addons/base_phone/__init__.py
 -rw-r--r--  2.0 unx       13 b- defN 16-Apr-05 19:55 odoo/addons/base_phone/requirements.txt
--rw-r--r--  2.0 unx     3404 b- defN 16-Dec-31 03:33 odoo/addons/base_phone/README.rst
--rw-r--r--  2.0 unx     2373 b- defN 16-Dec-31 03:33 odoo/addons/base_phone/common.py
--rw-r--r--  2.0 unx      420 b- defN 16-Dec-31 03:33 odoo/addons/base_phone/security/phone_security.xml
+-rw-r--r--  2.0 unx     3404 b- defN 17-Jan-25 03:33 odoo/addons/base_phone/README.rst
+-rw-r--r--  2.0 unx     2557 b- defN 17-Jan-25 03:33 odoo/addons/base_phone/common.py
+-rw-r--r--  2.0 unx      420 b- defN 17-Jan-25 03:33 odoo/addons/base_phone/security/phone_security.xml
 -rw-r--r--  2.0 unx      176 b- defN 16-Apr-05 19:55 odoo/addons/base_phone/security/ir.model.access.csv
--rw-r--r--  2.0 unx     1036 b- defN 16-Dec-31 03:33 odoo/addons/base_phone/models/res_partner.py
--rw-r--r--  2.0 unx      123 b- defN 16-Dec-31 03:33 odoo/addons/base_phone/models/__init__.py
--rw-r--r--  2.0 unx      968 b- defN 16-Dec-31 03:33 odoo/addons/base_phone/models/base.py
--rw-r--r--  2.0 unx     1431 b- defN 16-Dec-31 03:33 odoo/addons/base_phone/models/res_company.py
--rw-r--r--  2.0 unx     5871 b- defN 16-Dec-31 03:33 odoo/addons/base_phone/models/phone_common.py
--rw-r--r--  2.0 unx    10575 b- defN 16-Dec-31 03:33 odoo/addons/base_phone/i18n/ru.po
--rw-r--r--  2.0 unx    20598 b- defN 16-Dec-31 03:33 odoo/addons/base_phone/i18n/pt.po
--rw-r--r--  2.0 unx    20616 b- defN 16-Dec-31 03:33 odoo/addons/base_phone/i18n/it.po
--rw-r--r--  2.0 unx    22529 b- defN 16-Dec-31 03:33 odoo/addons/base_phone/i18n/es.po
--rw-r--r--  2.0 unx    10444 b- defN 16-Dec-31 03:33 odoo/addons/base_phone/i18n/nl_BE.po
--rw-r--r--  2.0 unx    10513 b- defN 16-Dec-31 03:33 odoo/addons/base_phone/i18n/ar.po
--rw-r--r--  2.0 unx    10496 b- defN 16-Dec-31 03:33 odoo/addons/base_phone/i18n/lt.po
--rw-r--r--  2.0 unx    10471 b- defN 16-Dec-31 03:33 odoo/addons/base_phone/i18n/ro.po
--rw-r--r--  2.0 unx    21719 b- defN 16-Dec-31 03:33 odoo/addons/base_phone/i18n/tr.po
--rw-r--r--  2.0 unx    20634 b- defN 16-Dec-31 03:33 odoo/addons/base_phone/i18n/hr.po
--rw-r--r--  2.0 unx    10445 b- defN 16-Dec-31 03:33 odoo/addons/base_phone/i18n/es_EC.po
--rw-r--r--  2.0 unx    20586 b- defN 16-Dec-31 03:33 odoo/addons/base_phone/i18n/gl.po
--rw-r--r--  2.0 unx    20585 b- defN 16-Dec-31 03:33 odoo/addons/base_phone/i18n/ca.po
--rw-r--r--  2.0 unx    10448 b- defN 16-Dec-31 03:33 odoo/addons/base_phone/i18n/es_CR.po
--rw-r--r--  2.0 unx    21842 b- defN 16-Dec-31 03:33 odoo/addons/base_phone/i18n/sl.po
+-rw-r--r--  2.0 unx     1036 b- defN 17-Jan-25 03:33 odoo/addons/base_phone/models/res_partner.py
+-rw-r--r--  2.0 unx      563 b- defN 17-Jan-25 03:33 odoo/addons/base_phone/models/ir_fields_converter.py
+-rw-r--r--  2.0 unx      157 b- defN 17-Jan-25 03:33 odoo/addons/base_phone/models/__init__.py
+-rw-r--r--  2.0 unx      968 b- defN 17-Jan-25 03:33 odoo/addons/base_phone/models/base.py
+-rw-r--r--  2.0 unx     1431 b- defN 17-Jan-25 03:33 odoo/addons/base_phone/models/res_company.py
+-rw-r--r--  2.0 unx     5871 b- defN 17-Jan-25 03:33 odoo/addons/base_phone/models/phone_common.py
+-rw-r--r--  2.0 unx    10575 b- defN 17-Jan-25 03:33 odoo/addons/base_phone/i18n/ru.po
+-rw-r--r--  2.0 unx    20598 b- defN 17-Jan-25 03:33 odoo/addons/base_phone/i18n/pt.po
+-rw-r--r--  2.0 unx    20616 b- defN 17-Jan-25 03:33 odoo/addons/base_phone/i18n/it.po
+-rw-r--r--  2.0 unx    22529 b- defN 17-Jan-25 03:33 odoo/addons/base_phone/i18n/es.po
+-rw-r--r--  2.0 unx    10444 b- defN 17-Jan-25 03:33 odoo/addons/base_phone/i18n/nl_BE.po
+-rw-r--r--  2.0 unx    10513 b- defN 17-Jan-25 03:33 odoo/addons/base_phone/i18n/ar.po
+-rw-r--r--  2.0 unx    10496 b- defN 17-Jan-25 03:33 odoo/addons/base_phone/i18n/lt.po
+-rw-r--r--  2.0 unx    10471 b- defN 17-Jan-25 03:33 odoo/addons/base_phone/i18n/ro.po
+-rw-r--r--  2.0 unx    21719 b- defN 17-Jan-25 03:33 odoo/addons/base_phone/i18n/tr.po
+-rw-r--r--  2.0 unx    20634 b- defN 17-Jan-25 03:33 odoo/addons/base_phone/i18n/hr.po
+-rw-r--r--  2.0 unx    10445 b- defN 17-Jan-25 03:33 odoo/addons/base_phone/i18n/es_EC.po
+-rw-r--r--  2.0 unx    20586 b- defN 17-Jan-25 03:33 odoo/addons/base_phone/i18n/gl.po
+-rw-r--r--  2.0 unx    20585 b- defN 17-Jan-25 03:33 odoo/addons/base_phone/i18n/ca.po
+-rw-r--r--  2.0 unx    10448 b- defN 17-Jan-25 03:33 odoo/addons/base_phone/i18n/es_CR.po
+-rw-r--r--  2.0 unx    21842 b- defN 17-Jan-25 03:33 odoo/addons/base_phone/i18n/sl.po
 -rw-r--r--  2.0 unx     6565 b- defN 16-Apr-05 19:55 odoo/addons/base_phone/i18n/base_phone.pot
--rw-r--r--  2.0 unx    10429 b- defN 16-Dec-31 03:33 odoo/addons/base_phone/i18n/th.po
--rw-r--r--  2.0 unx    20599 b- defN 16-Dec-31 03:33 odoo/addons/base_phone/i18n/es_ES.po
--rw-r--r--  2.0 unx    10453 b- defN 16-Dec-31 03:33 odoo/addons/base_phone/i18n/cs.po
--rw-r--r--  2.0 unx    20623 b- defN 16-Dec-31 03:33 odoo/addons/base_phone/i18n/pt_PT.po
--rw-r--r--  2.0 unx    10427 b- defN 16-Dec-31 03:33 odoo/addons/base_phone/i18n/et.po
--rw-r--r--  2.0 unx    10428 b- defN 16-Dec-31 03:33 odoo/addons/base_phone/i18n/nl.po
--rw-r--r--  2.0 unx    20584 b- defN 16-Dec-31 03:33 odoo/addons/base_phone/i18n/am.po
--rw-r--r--  2.0 unx    22357 b- defN 16-Dec-31 03:33 odoo/addons/base_phone/i18n/de.po
--rw-r--r--  2.0 unx    10427 b- defN 16-Dec-31 03:33 odoo/addons/base_phone/i18n/vi.po
--rw-r--r--  2.0 unx    21715 b- defN 16-Dec-31 03:33 odoo/addons/base_phone/i18n/fr.po
--rw-r--r--  2.0 unx    10484 b- defN 16-Dec-31 03:33 odoo/addons/base_phone/i18n/pl.po
--rw-r--r--  2.0 unx    20605 b- defN 16-Dec-31 03:33 odoo/addons/base_phone/i18n/pt_BR.po
--rw-r--r--  2.0 unx    20691 b- defN 16-Dec-31 03:33 odoo/addons/base_phone/i18n/el_GR.po
--rw-r--r--  2.0 unx    10447 b- defN 16-Dec-31 03:33 odoo/addons/base_phone/i18n/es_VE.po
--rw-r--r--  2.0 unx    10444 b- defN 16-Dec-31 03:33 odoo/addons/base_phone/i18n/es_MX.po
--rw-r--r--  2.0 unx    20591 b- defN 16-Dec-31 03:33 odoo/addons/base_phone/i18n/fi.po
--rw-r--r--  2.0 unx     4099 b- defN 16-Dec-31 03:33 odoo/addons/base_phone/wizard/number_not_found.py
--rw-r--r--  2.0 unx     2562 b- defN 16-Dec-31 03:33 odoo/addons/base_phone/wizard/reformat_all_phonenumbers.py
--rw-r--r--  2.0 unx     2086 b- defN 16-Dec-31 03:33 odoo/addons/base_phone/wizard/number_not_found_view.xml
--rw-r--r--  2.0 unx     2451 b- defN 16-Dec-31 03:33 odoo/addons/base_phone/wizard/reformat_all_phonenumbers_view.xml
+-rw-r--r--  2.0 unx    10429 b- defN 17-Jan-25 03:33 odoo/addons/base_phone/i18n/th.po
+-rw-r--r--  2.0 unx    20599 b- defN 17-Jan-25 03:33 odoo/addons/base_phone/i18n/es_ES.po
+-rw-r--r--  2.0 unx    10453 b- defN 17-Jan-25 03:33 odoo/addons/base_phone/i18n/cs.po
+-rw-r--r--  2.0 unx    20623 b- defN 17-Jan-25 03:33 odoo/addons/base_phone/i18n/pt_PT.po
+-rw-r--r--  2.0 unx    10427 b- defN 17-Jan-25 03:33 odoo/addons/base_phone/i18n/et.po
+-rw-r--r--  2.0 unx    10428 b- defN 17-Jan-25 03:33 odoo/addons/base_phone/i18n/nl.po
+-rw-r--r--  2.0 unx    20584 b- defN 17-Jan-25 03:33 odoo/addons/base_phone/i18n/am.po
+-rw-r--r--  2.0 unx    22357 b- defN 17-Jan-25 03:33 odoo/addons/base_phone/i18n/de.po
+-rw-r--r--  2.0 unx    10427 b- defN 17-Jan-25 03:33 odoo/addons/base_phone/i18n/vi.po
+-rw-r--r--  2.0 unx    21715 b- defN 17-Jan-25 03:33 odoo/addons/base_phone/i18n/fr.po
+-rw-r--r--  2.0 unx    10484 b- defN 17-Jan-25 03:33 odoo/addons/base_phone/i18n/pl.po
+-rw-r--r--  2.0 unx    20605 b- defN 17-Jan-25 03:33 odoo/addons/base_phone/i18n/pt_BR.po
+-rw-r--r--  2.0 unx    20691 b- defN 17-Jan-25 03:33 odoo/addons/base_phone/i18n/el_GR.po
+-rw-r--r--  2.0 unx    10447 b- defN 17-Jan-25 03:33 odoo/addons/base_phone/i18n/es_VE.po
+-rw-r--r--  2.0 unx    10444 b- defN 17-Jan-25 03:33 odoo/addons/base_phone/i18n/es_MX.po
+-rw-r--r--  2.0 unx    20591 b- defN 17-Jan-25 03:33 odoo/addons/base_phone/i18n/fi.po
+-rw-r--r--  2.0 unx     4103 b- defN 17-Jan-25 03:33 odoo/addons/base_phone/wizard/number_not_found.py
+-rw-r--r--  2.0 unx     2562 b- defN 17-Jan-25 03:33 odoo/addons/base_phone/wizard/reformat_all_phonenumbers.py
+-rw-r--r--  2.0 unx     2086 b- defN 17-Jan-25 03:33 odoo/addons/base_phone/wizard/number_not_found_view.xml
+-rw-r--r--  2.0 unx     2451 b- defN 17-Jan-25 03:33 odoo/addons/base_phone/wizard/reformat_all_phonenumbers_view.xml
 -rw-r--r--  2.0 unx     1046 b- defN 16-Apr-05 19:55 odoo/addons/base_phone/wizard/__init__.py
--rw-r--r--  2.0 unx      396 b- defN 16-Dec-31 03:33 odoo/addons/base_phone/views/res_partner_view.xml
--rw-r--r--  2.0 unx     1462 b- defN 16-Dec-31 03:33 odoo/addons/base_phone/views/res_users_view.xml
--rw-r--r--  2.0 unx      802 b- defN 16-Dec-31 03:33 odoo/addons/base_phone/views/res_company_view.xml
--rw-r--r--  2.0 unx     1403 b- defN 16-Dec-31 03:33 odoo/addons/base_phone/controllers/main.py
--rw-r--r--  2.0 unx       44 b- defN 16-Dec-31 03:33 odoo/addons/base_phone/controllers/__init__.py
--rw-r--r--  2.0 unx     2402 b- defN 16-Dec-31 03:33 odoo/addons/base_phone/tests/test_phone.py
--rw-r--r--  2.0 unx       50 b- defN 16-Dec-31 03:33 odoo/addons/base_phone/tests/__init__.py
--rw-r--r--  2.0 unx     5325 b- defN 16-Dec-31 03:33 odoo/addons/base_phone/static/src/js/phone_widget.js
--rw-r--r--  2.0 unx      390 b- defN 16-Dec-31 03:33 odoo/addons/base_phone/static/src/xml/phone.xml
--rw-r--r--  2.0 unx        5 b- defN 16-Dec-31 03:33 odoo10_addon_base_phone-10.0.0.1.0.99.dev3.dist-info/top_level.txt
--rw-r--r--  2.0 unx       92 b- defN 16-Dec-31 03:33 odoo10_addon_base_phone-10.0.0.1.0.99.dev3.dist-info/WHEEL
--rw-r--r--  2.0 unx     6737 b- defN 17-Apr-08 19:12 odoo10_addon_base_phone-10.0.0.1.0.99.dev3.dist-info/RECORD
--rw-r--r--  2.0 unx      696 b- defN 17-Apr-08 19:12 odoo10_addon_base_phone-10.0.0.1.0.99.dev3.dist-info/metadata.json
--rw-r--r--  2.0 unx     3406 b- defN 16-Dec-31 03:33 odoo10_addon_base_phone-10.0.0.1.0.99.dev3.dist-info/DESCRIPTION.rst
--rw-r--r--  2.0 unx     3902 b- defN 17-Apr-08 19:12 odoo10_addon_base_phone-10.0.0.1.0.99.dev3.dist-info/METADATA
--rw-r--r--  2.0 unx       17 b- defN 16-Dec-31 03:33 odoo10_addon_base_phone-10.0.0.1.0.99.dev3.dist-info/namespace_packages.txt
-68 files, 560479 bytes uncompressed, 106153 bytes compressed:  81.1%
+-rw-r--r--  2.0 unx      396 b- defN 17-Jan-25 03:33 odoo/addons/base_phone/views/res_partner_view.xml
+-rw-r--r--  2.0 unx     1462 b- defN 17-Jan-25 03:33 odoo/addons/base_phone/views/res_users_view.xml
+-rw-r--r--  2.0 unx      802 b- defN 17-Jan-25 03:33 odoo/addons/base_phone/views/res_company_view.xml
+-rw-r--r--  2.0 unx     1374 b- defN 17-Jan-25 03:33 odoo/addons/base_phone/controllers/main.py
+-rw-r--r--  2.0 unx       44 b- defN 17-Jan-25 03:33 odoo/addons/base_phone/controllers/__init__.py
+-rw-r--r--  2.0 unx     2957 b- defN 17-Jan-25 03:33 odoo/addons/base_phone/tests/test_phone.py
+-rw-r--r--  2.0 unx       50 b- defN 17-Jan-25 03:33 odoo/addons/base_phone/tests/__init__.py
+-rw-r--r--  2.0 unx     5307 b- defN 17-Jan-25 03:33 odoo/addons/base_phone/static/src/js/phone_widget.js
+-rw-r--r--  2.0 unx      996 b- defN 17-Jan-25 03:33 odoo/addons/base_phone/static/src/xml/phone.xml
+69 files, 562487 bytes uncompressed, 106871 bytes compressed:  81.0%
```

## zipnote {}

```diff
@@ -1,8 +1,29 @@
-Filename: odoo10_addon_base_phone-10.0.0.1.0.99.dev3-py2.7-nspkg.pth
+Filename: odoo10_addon_base_phone-10.0.0.1.0.99.dev9-py2.7-nspkg.pth
+Comment: 
+
+Filename: odoo10_addon_base_phone-10.0.0.1.0.99.dev9.dist-info/top_level.txt
+Comment: 
+
+Filename: odoo10_addon_base_phone-10.0.0.1.0.99.dev9.dist-info/WHEEL
+Comment: 
+
+Filename: odoo10_addon_base_phone-10.0.0.1.0.99.dev9.dist-info/RECORD
+Comment: 
+
+Filename: odoo10_addon_base_phone-10.0.0.1.0.99.dev9.dist-info/metadata.json
+Comment: 
+
+Filename: odoo10_addon_base_phone-10.0.0.1.0.99.dev9.dist-info/DESCRIPTION.rst
+Comment: 
+
+Filename: odoo10_addon_base_phone-10.0.0.1.0.99.dev9.dist-info/METADATA
+Comment: 
+
+Filename: odoo10_addon_base_phone-10.0.0.1.0.99.dev9.dist-info/namespace_packages.txt
 Comment: 
 
 Filename: odoo/addons/base_phone/__manifest__.py
 Comment: 
 
 Filename: odoo/addons/base_phone/fields.py
 Comment: 
@@ -27,14 +48,17 @@
 
 Filename: odoo/addons/base_phone/security/ir.model.access.csv
 Comment: 
 
 Filename: odoo/addons/base_phone/models/res_partner.py
 Comment: 
 
+Filename: odoo/addons/base_phone/models/ir_fields_converter.py
+Comment: 
+
 Filename: odoo/addons/base_phone/models/__init__.py
 Comment: 
 
 Filename: odoo/addons/base_phone/models/base.py
 Comment: 
 
 Filename: odoo/addons/base_phone/models/res_company.py
@@ -177,29 +201,8 @@
 
 Filename: odoo/addons/base_phone/static/src/js/phone_widget.js
 Comment: 
 
 Filename: odoo/addons/base_phone/static/src/xml/phone.xml
 Comment: 
 
-Filename: odoo10_addon_base_phone-10.0.0.1.0.99.dev3.dist-info/top_level.txt
-Comment: 
-
-Filename: odoo10_addon_base_phone-10.0.0.1.0.99.dev3.dist-info/WHEEL
-Comment: 
-
-Filename: odoo10_addon_base_phone-10.0.0.1.0.99.dev3.dist-info/RECORD
-Comment: 
-
-Filename: odoo10_addon_base_phone-10.0.0.1.0.99.dev3.dist-info/metadata.json
-Comment: 
-
-Filename: odoo10_addon_base_phone-10.0.0.1.0.99.dev3.dist-info/DESCRIPTION.rst
-Comment: 
-
-Filename: odoo10_addon_base_phone-10.0.0.1.0.99.dev3.dist-info/METADATA
-Comment: 
-
-Filename: odoo10_addon_base_phone-10.0.0.1.0.99.dev3.dist-info/namespace_packages.txt
-Comment: 
-
 Zip file comment:
```

## odoo/addons/base_phone/common.py

```diff
@@ -38,20 +38,24 @@
     loc_vals = vals.copy()
     for field in fields_to_convert:
         country_key = self._fields[field].country_field
         partner_key = self._fields[field].partner_field
         country = False
         if country_key:
             if country_key in loc_vals:
-                country = self.env['res.country'].browse(vals[country_key])
+                # Warning: when we edit or create a partner from the
+                # POS frontend vals[country_key] is a string !
+                country = self.env['res.country'].browse(
+                    int(vals[country_key]))
             else:
                 country = self[country_key]
         if partner_key and not country:
             if partner_key in loc_vals:
-                partner = self.env['res.partner'].browse(vals[partner_key])
+                partner = self.env['res.partner'].browse(
+                    int(vals[partner_key]))
             else:
                 partner = self[partner_key]
             if partner:
                 country = partner.country_id
         if not country:
             country = self.env.user.company_id.country_id
         country_code = False
```

## odoo/addons/base_phone/models/__init__.py

```diff
@@ -1,6 +1,7 @@
 # -*- coding: utf-8 -*-
 
 from . import base
 from . import res_company
 from . import res_partner
 from . import phone_common
+from . import ir_fields_converter
```

## odoo/addons/base_phone/wizard/number_not_found.py

```diff
@@ -25,15 +25,15 @@
         "E.164).")
     e164_number = fields.Char(
         string='E.164 Number', size=64,
         help="E.164 equivalent of the calling number.")
     number_type = fields.Selection(selection=[
         ('phone', 'Fixed'),
         ('mobile', 'Mobile')
-    ], string='Fixed/Mobile', required=True)
+        ], string='Fixed/Mobile', required=True)
     to_update_partner_id = fields.Many2one(
         comodel_name='res.partner', string='Partner to Update',
         help="Partner on which the phone number will be written")
     current_partner_phone = phone_fields.Phone(
         related='to_update_partner_id.phone', string='Current Phone',
         readonly=True)
     current_partner_mobile = phone_fields.Phone(
```

## odoo/addons/base_phone/controllers/main.py

```diff
@@ -15,19 +15,17 @@
 #    GNU Affero General Public License for more details.
 #
 #    You should have received a copy of the GNU Affero General Public License
 #    along with this program.  If not, see <http://www.gnu.org/licenses/>.
 #
 ##############################################################################
 
-import odoo
+from odoo import http
 
 
-class BasePhoneController(odoo.http.Controller):
-    @odoo.http.route('/base_phone', type='json', auth='none')
-    def click2dial(self, req, phone_number, click2dial_model, click2dial_id):
-        res = req.session.model('phone.common').click2dial(
-            phone_number, {
-                'click2dial_model': click2dial_model,
-                'click2dial_id': click2dial_id,
-                })
+class BasePhoneController(http.Controller):
+    @http.route('/base_phone/click2dial', type='json', auth='user')
+    def click2dial(self, phone_number, click2dial_model, click2dial_id):
+        res = http.request.env['phone.common'].with_context(
+            click2dial_model=click2dial_model,
+            click2dial_id=click2dial_id).click2dial(phone_number)
         return res
```

## odoo/addons/base_phone/tests/test_phone.py

```diff
@@ -4,15 +4,16 @@
 from openerp.tests.common import TransactionCase
 
 
 class TestPhone(TransactionCase):
 
     def test_phone(self):
         company = self.env.ref('base.main_company')
-        company.country_id = self.env.ref('base.fr').id
+        fr_country_id = self.env.ref('base.fr').id
+        company.country_id = fr_country_id
         rpo = self.env['res.partner']
         # Create an existing partner without country
         partner1 = rpo.create({
             'name': u'Pierre Paillet',
             'phone': '04-72-08-87-32',
             'mobile':  '06.42.77.42.66',
             'fax': '(0) 1 45 42 12 42',
@@ -36,19 +37,30 @@
         agrolait = self.env.ref('base.res_partner_2')
         self.assertEquals(agrolait.country_id, self.env.ref('base.be'))
         agrolait.write({'phone': '(0) 2 391 43 74'})
         self.assertEquals(agrolait.phone, u'+32 2 391 43 74')
         # Write on an existing partner with country at the same time
         agrolait.write({
             'fax': '04 72 89 32 43',
-            'country_id': self.env.ref('base.fr').id,
+            'country_id': fr_country_id,
             })
         self.assertEquals(agrolait.fax, u'+33 4 72 89 32 43')
         # Write an invalid phone number
         partner2.fax = '42'
         self.assertEquals(partner2.fax, u'42')
         # Test get_name_from_phone_number
         pco = self.env['phone.common']
         name = pco.get_name_from_phone_number('0642774266')
         self.assertEquals(name, 'Pierre Paillet')
         name2 = pco.get_name_from_phone_number('0041216191010')
         self.assertEquals(name2, u'Joël Grand-Guillaume (Camptocamp)')
+        # Test against the POS bug
+        # https://github.com/OCA/connector-telephony/issues/113
+        # When we edit/create a partner from the POS,
+        # the country_id key in create(vals) is given as a string !
+        partnerpos = rpo.create({
+            'name': u'POS customer',
+            'phone': '04-72-08-87-42',
+            'country_id': str(fr_country_id),
+            })
+        self.assertEquals(partnerpos.phone, u'+33 4 72 08 87 42')
+        self.assertEquals(partnerpos.country_id.id, fr_country_id)
```

## odoo/addons/base_phone/static/src/js/phone_widget.js

### js-beautify {}

```diff
@@ -45,17 +45,17 @@
                 if (phone_num) {
                     phone_num = phone_num.replace(/ /g, '').replace(/-/g, '');
                 }
                 var click2dial_text = '';
                 if (phone_num && !this.options.dial_button_invisible) {
                     click2dial_text = _t('Dial');
                 }
-                this.$el.find('#click2dial').off('click');
-                this.$el.find('#click2dial')
+                this.$el.filter('#click2dial')
                     .text(click2dial_text)
+                    .attr('href', '#')
                     .on('click', function(ev) {
                         self.do_notify(
                             _t('Click2dial started'),
                             _t('Unhook your ringing phone'),
                             false);
                         var arg = {
                             'phone_number': phone_num,
```

## odoo/addons/base_phone/static/src/xml/phone.xml

### odoo/addons/base_phone/static/src/xml/phone.xml

```diff
@@ -1,14 +1,24 @@
 <?xml version="1.0" encoding="utf-8"?>
 <!--
     Base phone module for Odoo
     Copyright (C) 2013-2015 Alexis de Lattre <alexis@via.ecp.fr>
     The licence is in the file __openerp__.py
 -->
 <templates id="template" xml:space="preserve">
-  <t t-name="FieldFax">
-    <t t-call="FieldEmail"/>
+  <t t-name="FieldFax" t-extend="FieldEmail">
+    <t t-jquery="span" t-operation="replace">
+      <t t-if="widget.get('effective_readonly')">
+        <a t-if="widget.clickable" class="o_form_uri o_text_overflow" href="#" target="_blank"/>
+        <span t-if="!widget.clickable" class="o_text_overflow"/>
+      </t>
+    </t>
   </t>
-  <t t-name="FieldPhone">
-    <t t-call="FieldFax"/>
+  <t t-name="FieldPhone" t-extend="FieldFax">
+    <t t-jquery="span" t-operation="replace">
+      <t t-if="widget.get('effective_readonly')">
+        <a t-if="widget.clickable" class="o_form_uri o_text_overflow" href="#" target="_blank"/>
+        <span t-if="!widget.clickable" class="o_text_overflow"/>
+      </t>
+    </t>
   </t>
 </templates>
```

## Comparing `odoo10_addon_base_phone-10.0.0.1.0.99.dev3-py2.7-nspkg.pth` & `odoo10_addon_base_phone-10.0.0.1.0.99.dev9-py2.7-nspkg.pth`

 * *Files identical despite different names*

## Comparing `odoo10_addon_base_phone-10.0.0.1.0.99.dev3.dist-info/RECORD` & `odoo10_addon_base_phone-10.0.0.1.0.99.dev9.dist-info/RECORD`

 * *Files 7% similar despite different names*

```diff
@@ -1,19 +1,27 @@
-odoo10_addon_base_phone-10.0.0.1.0.99.dev3-py2.7-nspkg.pth,sha256=0JYfSe1CuOIavM-niNQsLPHFUG5a3_sL6cfIkXGMUhA,669
+odoo10_addon_base_phone-10.0.0.1.0.99.dev9-py2.7-nspkg.pth,sha256=0JYfSe1CuOIavM-niNQsLPHFUG5a3_sL6cfIkXGMUhA,669
+odoo10_addon_base_phone-10.0.0.1.0.99.dev9.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
+odoo10_addon_base_phone-10.0.0.1.0.99.dev9.dist-info/WHEEL,sha256=bee59qcPjkyXfMaxNWjl2CGotqfumWx9pC1hlVLr2mM,92
+odoo10_addon_base_phone-10.0.0.1.0.99.dev9.dist-info/RECORD,,
+odoo10_addon_base_phone-10.0.0.1.0.99.dev9.dist-info/metadata.json,sha256=xXQk0TBAiHevvPHlzxLPMK1_RsnkLj7FZ6CPz4EHwmI,696
+odoo10_addon_base_phone-10.0.0.1.0.99.dev9.dist-info/DESCRIPTION.rst,sha256=c-gB1l0aQ-x5lV-r0ybtAR_5F0n6mzINMMC0WdjGaz0,3406
+odoo10_addon_base_phone-10.0.0.1.0.99.dev9.dist-info/METADATA,sha256=lJPv7-3lzFbuZ_MMJ5iZfmkD_ge8HpEfU9fUcXcM5rk,3902
+odoo10_addon_base_phone-10.0.0.1.0.99.dev9.dist-info/namespace_packages.txt,sha256=igDP6S4ywc6jzcMqzrKZpRtAUXrS-iYaA_Hu1EtlI48,17
 odoo/addons/base_phone/__manifest__.py,sha256=DSB9rA-1fSh1gUEVJuMiMI7U1B4hTEPJFQQcOp9dy7w,1735
 odoo/addons/base_phone/fields.py,sha256=BXCBa62enBjBc9Tbx8qXOPFyJ5zaqX2jUn3t2Fg7M9E,1906
 odoo/addons/base_phone/web_phone.xml,sha256=Jmx5p1yfE-5QovrYwihu7sZSWiG7oFovTyyoMC1BzK0,497
 odoo/addons/base_phone/__init__.py,sha256=zjs03UsG2t7_sfsuaz6sOZes6G_5YC2JtO-VzsozTX0,114
 odoo/addons/base_phone/requirements.txt,sha256=_MH-Ln0-kKnNk_VSVXJFRlVIr6mp12OAm4RBfSveeQI,13
 odoo/addons/base_phone/README.rst,sha256=BPKRm_njd_scg4M3pgB0hrk3UrHfNAAX1o2D34kcA0Q,3404
-odoo/addons/base_phone/common.py,sha256=x7ZNgi5YTYPgSSHcZwvcOQ11OeM4hq5xt1nQaYFvblA,2373
+odoo/addons/base_phone/common.py,sha256=7ohzW5Im6GMyaXDKoQxIbkb_N8omF6mTg-O1-SXsIp8,2557
 odoo/addons/base_phone/security/phone_security.xml,sha256=KJ9zGsIy0ATGfHyb9bmDljwN3HLZ0L1gkx4gPtM29D8,420
 odoo/addons/base_phone/security/ir.model.access.csv,sha256=KA9JBjlBdbRWdm5vNVQWVhdn_wFtPJi2jLcZEi8Aik0,176
 odoo/addons/base_phone/models/res_partner.py,sha256=mg0rzN4ltRS_1-SbtQb4Xo9BBA_eJiJmqeoHAunKrlc,1036
-odoo/addons/base_phone/models/__init__.py,sha256=SNSr9itTUokswVaRMfptnYqWSBE5Jmb31QGqYa0oG78,123
+odoo/addons/base_phone/models/ir_fields_converter.py,sha256=l_y3_NNWznckzXJF1s9FAR5vTc6W6cUn7TXpacbBaDI,563
+odoo/addons/base_phone/models/__init__.py,sha256=SWgBuUzq3Caf25oOjtyXYXL1v-TQe7M_nlA9CXvq-Xo,157
 odoo/addons/base_phone/models/base.py,sha256=tztShBN1rQyuvTnfWRIcbm_ZHn_YSkNAH9LW9YyfZB8,968
 odoo/addons/base_phone/models/res_company.py,sha256=oBbXp6q6iv5tc2dbzlNhhiBplqdo6dAo3S6Y-cGR2KE,1431
 odoo/addons/base_phone/models/phone_common.py,sha256=wK-Oiae18acxfV6C1-mX_wpWCmw_YWNElyfZHGP_7Dc,5871
 odoo/addons/base_phone/i18n/ru.po,sha256=HyYBm7eeZ5ErvxZ_iyb_iwcR7JUdYPKVmzpcu7k6O1s,10575
 odoo/addons/base_phone/i18n/pt.po,sha256=t9LvnnsODxky3_z3R7zgtVpoexzBZBVciPjdKDTPdO8,20598
 odoo/addons/base_phone/i18n/it.po,sha256=vl7z02Z3ADTd-RwgjETFojmJi4JRmvyg1mIjlgG5FvU,20616
 odoo/addons/base_phone/i18n/es.po,sha256=1dPmuN73k9y4WrK3CRRXNowv9evkAABFfjYxqKkRS30,22529
@@ -41,28 +49,21 @@
 odoo/addons/base_phone/i18n/fr.po,sha256=_8wh1liuEL6_vLQ-58eam3Mw9aEFRDQVD2NZ072_Lww,21715
 odoo/addons/base_phone/i18n/pl.po,sha256=i9VddGvU3STNf-0GdMxrG0W16Ci3GM2d5zvHKBA4ngs,10484
 odoo/addons/base_phone/i18n/pt_BR.po,sha256=I2qWMeiwPa-ZxBuIMHmMK53oHbpLTf-B3uPXoGINFXU,20605
 odoo/addons/base_phone/i18n/el_GR.po,sha256=BrFyq-sGclsTouWCKkQHHDpNzcOPeNoLKjtIGf5F5rA,20691
 odoo/addons/base_phone/i18n/es_VE.po,sha256=loLNDgAgD0PuW1NLRA1UhgX6aLnXQNAnoXJl-aB77Ig,10447
 odoo/addons/base_phone/i18n/es_MX.po,sha256=09SqzBUERA4oGTJ1zjDLIytw_OOzoggmmPCNT-WPn9I,10444
 odoo/addons/base_phone/i18n/fi.po,sha256=QXhss4z_Iy4GqqpffdZw1got5zUtm1h3i0YHD6JLit8,20591
-odoo/addons/base_phone/wizard/number_not_found.py,sha256=c0jE0AHTV_T39IB_YrI419LUiohWFu9OSRDRTs0A1_o,4099
+odoo/addons/base_phone/wizard/number_not_found.py,sha256=lBYmzxsMMtMPznZpCgGyFzWvhRg0VrPvU6ya3vWueZk,4103
 odoo/addons/base_phone/wizard/reformat_all_phonenumbers.py,sha256=zeZ4gQB38Q2cZv8vvbNC__PC1TNT0h4rvdLK29cN5PA,2562
 odoo/addons/base_phone/wizard/number_not_found_view.xml,sha256=83qPEHaOYPbkc-AOm77z-T6s14TdfKwUoejLo1kTVj0,2086
 odoo/addons/base_phone/wizard/reformat_all_phonenumbers_view.xml,sha256=QXypFJLLz586Fo2-JVN_TGa0PkxowI0p5Y35S5b4lZ8,2451
 odoo/addons/base_phone/wizard/__init__.py,sha256=ssb320fvwLA7rE1X4-qAyeCn8chyZa_pyihtvMOg5XQ,1046
 odoo/addons/base_phone/views/res_partner_view.xml,sha256=W0SijpVmFEEVvtCX4AsAiA6f3wM_Vktm0RNTWt6XAOU,396
 odoo/addons/base_phone/views/res_users_view.xml,sha256=J0bg4VuFknMm5gyNF04YD5VGMI0jpaGt_UvcbcpG_5g,1462
 odoo/addons/base_phone/views/res_company_view.xml,sha256=oimbHG1Yw3ZOtkigUXAfYtBoBI_ArVubMHBnBuLurco,802
-odoo/addons/base_phone/controllers/main.py,sha256=a-yj4OIiBL99hrMtSW1RQz7BhUGKA03MXQ9cMRmGveM,1403
+odoo/addons/base_phone/controllers/main.py,sha256=hqDz3AYcplC9PZ-dLWTN_pwy0j52dvxWDRDJXfaUfQ0,1374
 odoo/addons/base_phone/controllers/__init__.py,sha256=sjSh6u0VW5u6AwJVQkV4cy53Bh8UpM-gC3nvSoqeXMc,44
-odoo/addons/base_phone/tests/test_phone.py,sha256=D8IdsgFoZ4bdw2Sar9RPqqCnMtuaudWV25fO96fEaqQ,2402
+odoo/addons/base_phone/tests/test_phone.py,sha256=aev_854qxFLl1UAK_cSok6VFJwNcX8WvtFPxy0Hg7Gs,2957
 odoo/addons/base_phone/tests/__init__.py,sha256=NV1oClzr85yhwlf652iKAe8TzviF7cj7Jb4NGKpZoi4,50
-odoo/addons/base_phone/static/src/js/phone_widget.js,sha256=L-b7sjF4bKpJ6TJnxLFLqo0bq9JXHwHql1YHt0vN-mU,5325
-odoo/addons/base_phone/static/src/xml/phone.xml,sha256=6gKoLccJPpBinMGa6MD5ATCq14dGl7KNfSGLAv2QKZE,390
-odoo10_addon_base_phone-10.0.0.1.0.99.dev3.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
-odoo10_addon_base_phone-10.0.0.1.0.99.dev3.dist-info/WHEEL,sha256=bee59qcPjkyXfMaxNWjl2CGotqfumWx9pC1hlVLr2mM,92
-odoo10_addon_base_phone-10.0.0.1.0.99.dev3.dist-info/RECORD,,
-odoo10_addon_base_phone-10.0.0.1.0.99.dev3.dist-info/metadata.json,sha256=mJ1X11JrWe-lM1_OhV-hlFuiR11SNFJw7zfnpcdgrfY,696
-odoo10_addon_base_phone-10.0.0.1.0.99.dev3.dist-info/DESCRIPTION.rst,sha256=c-gB1l0aQ-x5lV-r0ybtAR_5F0n6mzINMMC0WdjGaz0,3406
-odoo10_addon_base_phone-10.0.0.1.0.99.dev3.dist-info/METADATA,sha256=DS1EHkELtV1lItdH_usx_5Yi022lhXw9jyQpfEhv0mQ,3902
-odoo10_addon_base_phone-10.0.0.1.0.99.dev3.dist-info/namespace_packages.txt,sha256=igDP6S4ywc6jzcMqzrKZpRtAUXrS-iYaA_Hu1EtlI48,17
+odoo/addons/base_phone/static/src/js/phone_widget.js,sha256=kfvcHvNsM_3_nqxr1VsB4-3wcKsc1B6Es8Vu2r_R6EQ,5307
+odoo/addons/base_phone/static/src/xml/phone.xml,sha256=J130d9Xe8WqaNSL6_UeE5vqRGuI8DwEszavBtgWZQtc,996
```

## Comparing `odoo10_addon_base_phone-10.0.0.1.0.99.dev3.dist-info/metadata.json` & `odoo10_addon_base_phone-10.0.0.1.0.99.dev9.dist-info/metadata.json`

 * *Files 1% similar despite different names*

### Pretty-printed

 * *Similarity: 0.95%*

 * *Differences: {"'version'": "'10.0.0.1.0.99.dev9'"}*

```diff
@@ -31,9 +31,9 @@
             "requires": [
                 "odoo (<10.1dev,>=10.0)",
                 "phonenumbers"
             ]
         }
     ],
     "summary": "Validate phone numbers",
-    "version": "10.0.0.1.0.99.dev3"
+    "version": "10.0.0.1.0.99.dev9"
 }
```

## Comparing `odoo10_addon_base_phone-10.0.0.1.0.99.dev3.dist-info/DESCRIPTION.rst` & `odoo10_addon_base_phone-10.0.0.1.0.99.dev9.dist-info/DESCRIPTION.rst`

 * *Files identical despite different names*

## Comparing `odoo10_addon_base_phone-10.0.0.1.0.99.dev3.dist-info/METADATA` & `odoo10_addon_base_phone-10.0.0.1.0.99.dev9.dist-info/METADATA`

 * *Files 0% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.0
 Name: odoo10-addon-base-phone
-Version: 10.0.0.1.0.99.dev3
+Version: 10.0.0.1.0.99.dev9
 Summary: Validate phone numbers
 Home-page: http://www.akretion.com/
 Author: Akretion,Odoo Community Association (OCA)
 Author-email: support@odoo-community.org
 License: AGPL-3
 Platform: UNKNOWN
 Requires-Dist: odoo (<10.1dev,>=10.0)
```

