# Comparing `tmp/odoo_addon_delivery_multi_destination-15.0.1.0.1-py3-none-any.whl.zip` & `tmp/odoo_addon_delivery_multi_destination-15.0.1.0.2-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,33 +1,33 @@
-Zip file size: 40864 bytes, number of entries: 31
--rw-r--r--  2.0 unx     4038 b- defN 23-May-03 10:01 odoo/addons/delivery_multi_destination/README.rst
--rw-r--r--  2.0 unx       87 b- defN 23-May-03 10:01 odoo/addons/delivery_multi_destination/__init__.py
--rw-r--r--  2.0 unx      646 b- defN 23-May-03 10:01 odoo/addons/delivery_multi_destination/__manifest__.py
--rw-r--r--  2.0 unx     3753 b- defN 23-May-03 10:01 odoo/addons/delivery_multi_destination/demo/delivery_carrier_demo.xml
--rw-r--r--  2.0 unx     5186 b- defN 23-May-03 10:01 odoo/addons/delivery_multi_destination/i18n/cs_CZ.po
--rw-r--r--  2.0 unx     5059 b- defN 23-May-03 10:01 odoo/addons/delivery_multi_destination/i18n/de.po
--rw-r--r--  2.0 unx     4577 b- defN 23-May-03 10:01 odoo/addons/delivery_multi_destination/i18n/delivery_multi_destination.pot
--rw-r--r--  2.0 unx     5204 b- defN 23-May-03 10:01 odoo/addons/delivery_multi_destination/i18n/es.po
--rw-r--r--  2.0 unx     4877 b- defN 23-May-03 10:01 odoo/addons/delivery_multi_destination/i18n/fr.po
--rw-r--r--  2.0 unx     4879 b- defN 23-May-03 10:01 odoo/addons/delivery_multi_destination/i18n/it.po
--rw-r--r--  2.0 unx     4877 b- defN 23-May-03 10:01 odoo/addons/delivery_multi_destination/i18n/nl.po
--rw-r--r--  2.0 unx     4886 b- defN 23-May-03 10:01 odoo/addons/delivery_multi_destination/i18n/nl_NL.po
--rw-r--r--  2.0 unx     5390 b- defN 23-May-03 10:01 odoo/addons/delivery_multi_destination/i18n/pt_BR.po
--rw-r--r--  2.0 unx     5006 b- defN 23-May-03 10:01 odoo/addons/delivery_multi_destination/i18n/sl.po
--rw-r--r--  2.0 unx     5042 b- defN 23-May-03 10:01 odoo/addons/delivery_multi_destination/i18n/zh_CN.po
--rw-r--r--  2.0 unx       97 b- defN 23-May-03 10:01 odoo/addons/delivery_multi_destination/models/__init__.py
--rw-r--r--  2.0 unx     4631 b- defN 23-May-03 10:01 odoo/addons/delivery_multi_destination/models/delivery_carrier.py
--rw-r--r--  2.0 unx      386 b- defN 23-May-03 10:01 odoo/addons/delivery_multi_destination/readme/CONFIGURE.rst
--rw-r--r--  2.0 unx      186 b- defN 23-May-03 10:01 odoo/addons/delivery_multi_destination/readme/CONTRIBUTORS.rst
--rw-r--r--  2.0 unx      383 b- defN 23-May-03 10:01 odoo/addons/delivery_multi_destination/readme/DESCRIPTION.rst
--rw-r--r--  2.0 unx      129 b- defN 23-May-03 10:01 odoo/addons/delivery_multi_destination/readme/ROADMAP.rst
--rw-r--r--  2.0 unx      153 b- defN 23-May-03 10:01 odoo/addons/delivery_multi_destination/readme/USAGE.rst
--rw-r--r--  2.0 unx     9455 b- defN 23-May-03 10:01 odoo/addons/delivery_multi_destination/static/description/icon.png
--rw-r--r--  2.0 unx    13822 b- defN 23-May-03 10:01 odoo/addons/delivery_multi_destination/static/description/index.html
--rw-r--r--  2.0 unx      112 b- defN 23-May-03 10:01 odoo/addons/delivery_multi_destination/tests/__init__.py
--rw-r--r--  2.0 unx     7294 b- defN 23-May-03 10:01 odoo/addons/delivery_multi_destination/tests/test_delivery_multi_destination.py
--rw-r--r--  2.0 unx     4339 b- defN 23-May-03 10:01 odoo/addons/delivery_multi_destination/views/delivery_carrier_view.xml
--rw-r--r--  2.0 unx     4614 b- defN 23-May-03 10:01 odoo_addon_delivery_multi_destination-15.0.1.0.1.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 23-May-03 10:01 odoo_addon_delivery_multi_destination-15.0.1.0.1.dist-info/WHEEL
--rw-r--r--  2.0 unx        5 b- defN 23-May-03 10:01 odoo_addon_delivery_multi_destination-15.0.1.0.1.dist-info/top_level.txt
-?rw-rw-r--  2.0 unx     3519 b- defN 23-May-03 10:01 odoo_addon_delivery_multi_destination-15.0.1.0.1.dist-info/RECORD
-31 files, 112724 bytes uncompressed, 34844 bytes compressed:  69.1%
+Zip file size: 40915 bytes, number of entries: 31
+-rw-r--r--  2.0 unx     4038 b- defN 23-Jun-01 10:06 odoo/addons/delivery_multi_destination/README.rst
+-rw-r--r--  2.0 unx       87 b- defN 23-Jun-01 10:06 odoo/addons/delivery_multi_destination/__init__.py
+-rw-r--r--  2.0 unx      646 b- defN 23-Jun-01 10:06 odoo/addons/delivery_multi_destination/__manifest__.py
+-rw-r--r--  2.0 unx     3753 b- defN 23-Jun-01 10:06 odoo/addons/delivery_multi_destination/demo/delivery_carrier_demo.xml
+-rw-r--r--  2.0 unx     5186 b- defN 23-Jun-01 10:06 odoo/addons/delivery_multi_destination/i18n/cs_CZ.po
+-rw-r--r--  2.0 unx     5059 b- defN 23-Jun-01 10:06 odoo/addons/delivery_multi_destination/i18n/de.po
+-rw-r--r--  2.0 unx     4577 b- defN 23-Jun-01 10:06 odoo/addons/delivery_multi_destination/i18n/delivery_multi_destination.pot
+-rw-r--r--  2.0 unx     5204 b- defN 23-Jun-01 10:06 odoo/addons/delivery_multi_destination/i18n/es.po
+-rw-r--r--  2.0 unx     4877 b- defN 23-Jun-01 10:06 odoo/addons/delivery_multi_destination/i18n/fr.po
+-rw-r--r--  2.0 unx     4879 b- defN 23-Jun-01 10:06 odoo/addons/delivery_multi_destination/i18n/it.po
+-rw-r--r--  2.0 unx     4877 b- defN 23-Jun-01 10:06 odoo/addons/delivery_multi_destination/i18n/nl.po
+-rw-r--r--  2.0 unx     4886 b- defN 23-Jun-01 10:06 odoo/addons/delivery_multi_destination/i18n/nl_NL.po
+-rw-r--r--  2.0 unx     5390 b- defN 23-Jun-01 10:06 odoo/addons/delivery_multi_destination/i18n/pt_BR.po
+-rw-r--r--  2.0 unx     5006 b- defN 23-Jun-01 10:06 odoo/addons/delivery_multi_destination/i18n/sl.po
+-rw-r--r--  2.0 unx     5042 b- defN 23-Jun-01 10:06 odoo/addons/delivery_multi_destination/i18n/zh_CN.po
+-rw-r--r--  2.0 unx       97 b- defN 23-Jun-01 10:06 odoo/addons/delivery_multi_destination/models/__init__.py
+-rw-r--r--  2.0 unx     5097 b- defN 23-Jun-01 10:06 odoo/addons/delivery_multi_destination/models/delivery_carrier.py
+-rw-r--r--  2.0 unx      386 b- defN 23-Jun-01 10:06 odoo/addons/delivery_multi_destination/readme/CONFIGURE.rst
+-rw-r--r--  2.0 unx      186 b- defN 23-Jun-01 10:06 odoo/addons/delivery_multi_destination/readme/CONTRIBUTORS.rst
+-rw-r--r--  2.0 unx      383 b- defN 23-Jun-01 10:06 odoo/addons/delivery_multi_destination/readme/DESCRIPTION.rst
+-rw-r--r--  2.0 unx      129 b- defN 23-Jun-01 10:06 odoo/addons/delivery_multi_destination/readme/ROADMAP.rst
+-rw-r--r--  2.0 unx      153 b- defN 23-Jun-01 10:06 odoo/addons/delivery_multi_destination/readme/USAGE.rst
+-rw-r--r--  2.0 unx     9455 b- defN 23-Jun-01 10:06 odoo/addons/delivery_multi_destination/static/description/icon.png
+-rw-r--r--  2.0 unx    13822 b- defN 23-Jun-01 10:06 odoo/addons/delivery_multi_destination/static/description/index.html
+-rw-r--r--  2.0 unx      112 b- defN 23-Jun-01 10:06 odoo/addons/delivery_multi_destination/tests/__init__.py
+-rw-r--r--  2.0 unx     7294 b- defN 23-Jun-01 10:06 odoo/addons/delivery_multi_destination/tests/test_delivery_multi_destination.py
+-rw-r--r--  2.0 unx     4339 b- defN 23-Jun-01 10:06 odoo/addons/delivery_multi_destination/views/delivery_carrier_view.xml
+-rw-r--r--  2.0 unx     4614 b- defN 23-Jun-01 10:06 odoo_addon_delivery_multi_destination-15.0.1.0.2.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 23-Jun-01 10:06 odoo_addon_delivery_multi_destination-15.0.1.0.2.dist-info/WHEEL
+-rw-r--r--  2.0 unx        5 b- defN 23-Jun-01 10:06 odoo_addon_delivery_multi_destination-15.0.1.0.2.dist-info/top_level.txt
+?rw-rw-r--  2.0 unx     3519 b- defN 23-Jun-01 10:06 odoo_addon_delivery_multi_destination-15.0.1.0.2.dist-info/RECORD
+31 files, 113190 bytes uncompressed, 34895 bytes compressed:  69.2%
```

## zipnote {}

```diff
@@ -75,20 +75,20 @@
 
 Filename: odoo/addons/delivery_multi_destination/tests/test_delivery_multi_destination.py
 Comment: 
 
 Filename: odoo/addons/delivery_multi_destination/views/delivery_carrier_view.xml
 Comment: 
 
-Filename: odoo_addon_delivery_multi_destination-15.0.1.0.1.dist-info/METADATA
+Filename: odoo_addon_delivery_multi_destination-15.0.1.0.2.dist-info/METADATA
 Comment: 
 
-Filename: odoo_addon_delivery_multi_destination-15.0.1.0.1.dist-info/WHEEL
+Filename: odoo_addon_delivery_multi_destination-15.0.1.0.2.dist-info/WHEEL
 Comment: 
 
-Filename: odoo_addon_delivery_multi_destination-15.0.1.0.1.dist-info/top_level.txt
+Filename: odoo_addon_delivery_multi_destination-15.0.1.0.2.dist-info/top_level.txt
 Comment: 
 
-Filename: odoo_addon_delivery_multi_destination-15.0.1.0.1.dist-info/RECORD
+Filename: odoo_addon_delivery_multi_destination-15.0.1.0.2.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## odoo/addons/delivery_multi_destination/__manifest__.py

```diff
@@ -1,15 +1,15 @@
 # Copyright 2016-2019 Tecnativa - Pedro M. Baeza
 # Copyright 2017 Tecnativa - Luis M. Ontalba
 # Copyright 2021 Gianmarco Conte <gconte@dinamicheaziendali.it>
 # License AGPL-3.0 or later (https://www.gnu.org/licenses/agpl).
 
 {
     "name": "Multiple destinations for the same delivery method",
-    "version": "15.0.1.0.1",
+    "version": "15.0.1.0.2",
     "category": "Delivery",
     "website": "https://github.com/OCA/delivery-carrier",
     "author": "Tecnativa, Odoo Community Association (OCA)",
     "license": "AGPL-3",
     "installable": True,
     "depends": ["delivery"],
     "demo": ["demo/delivery_carrier_demo.xml"],
```

## odoo/addons/delivery_multi_destination/models/delivery_carrier.py

```diff
@@ -1,18 +1,15 @@
 # Copyright 2016-2020 Tecnativa - Pedro M. Baeza
 # Copyright 2017 Tecnativa - Luis M. Ontalba
 # Copyright 2021 Gianmarco Conte <gconte@dinamicheaziendali.it>
 # License AGPL-3.0 or later (https://www.gnu.org/licenses/agpl).
-import logging
 
 from odoo import _, api, fields, models
 from odoo.exceptions import ValidationError
 
-_logger = logging.getLogger(__name__)
-
 
 class DeliveryCarrier(models.Model):
     _inherit = "delivery.carrier"
 
     child_ids = fields.One2many(
         comodel_name="delivery.carrier",
         inverse_name="parent_id",
@@ -83,38 +80,45 @@
                         subcarrier,
                     ).rate_shipment(order)
 
     def send_shipping(self, pickings):
         """We have to override this method for redirecting the result to the
         proper "child" carrier.
         """
-        # falsy type is considered as one destination
-        if not self.destination_type or self.destination_type == "one":
+        if self.destination_type == "one" or not self:
             return super().send_shipping(pickings)
-        carrier = self.with_context(show_children_carriers=True)
-        res = []
-        for p in pickings:
-            picking_res = False
-            for subcarrier in carrier.child_ids:
-                picking_res = subcarrier._send_shipping_next(p, picking_res)
-            if not picking_res:
-                raise ValidationError(_("There is no matching delivery rule."))
-            res += picking_res
-        return res
-
-    def _send_shipping_next(self, picking, picking_res):
-        if self.delivery_type == "fixed":
-            if self._match_address(picking.partner_id):
-                picking_res = [
-                    {
-                        "exact_price": self.fixed_price,
-                        "tracking_number": False,
-                    }
-                ]
-            # TODO: verify if not match address, previous picking_res (passed
-            # in method's argument) can be used.
         else:
-            try:
-                picking_res = super().send_shipping(picking)
-            except Exception as err:
-                _logger.warning("%s: %s", "_send_shipping_next", str(err))
-        return picking_res
+            carrier = self.with_context(show_children_carriers=True)
+            res = []
+            for p in pickings:
+                picking_res = False
+                for subcarrier in carrier.child_ids.filtered(
+                    lambda x: not x.company_id or x.company_id == p.company_id
+                ):
+                    if subcarrier.delivery_type == "fixed":
+                        if subcarrier._match_address(p.partner_id):
+                            picking_res = [
+                                {
+                                    "exact_price": subcarrier.fixed_price,
+                                    "tracking_number": False,
+                                }
+                            ]
+                            break
+                    else:
+                        try:
+                            # on base_on_rule_send_shipping, the method
+                            # _get_price_available is called using p.carrier_id,
+                            # ignoring the self arg, so we need to temporarily replace
+                            # it with the subcarrier
+                            p.carrier_id = subcarrier.id
+                            picking_res = super(
+                                DeliveryCarrier, subcarrier
+                            ).send_shipping(p)
+                            break
+                        except Exception:  # pylint: disable=except-pass
+                            pass
+                        finally:
+                            p.carrier_id = carrier
+                if not picking_res:
+                    raise ValidationError(_("There is no matching delivery rule."))
+                res += picking_res
+            return res
```

## Comparing `odoo_addon_delivery_multi_destination-15.0.1.0.1.dist-info/METADATA` & `odoo_addon_delivery_multi_destination-15.0.1.0.2.dist-info/METADATA`

 * *Files 0% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: odoo-addon-delivery-multi-destination
-Version: 15.0.1.0.1
+Version: 15.0.1.0.2
 Summary: Multiple destinations for the same delivery method
 Home-page: https://github.com/OCA/delivery-carrier
 Author: Tecnativa, Odoo Community Association (OCA)
 Author-email: support@odoo-community.org
 License: AGPL-3
 Platform: UNKNOWN
 Classifier: Programming Language :: Python
```

## Comparing `odoo_addon_delivery_multi_destination-15.0.1.0.1.dist-info/RECORD` & `odoo_addon_delivery_multi_destination-15.0.1.0.2.dist-info/RECORD`

 * *Files 6% similar despite different names*

```diff
@@ -1,31 +1,31 @@
 odoo/addons/delivery_multi_destination/README.rst,sha256=qKFWu9dabADe_efkPsKAwrq8rRcvGCKCz-lm1nXZ6Ho,4038
 odoo/addons/delivery_multi_destination/__init__.py,sha256=eShEGRadAlxopoLqIQ4-N42FM7MWPSuBe0h_l1cXTPM,87
-odoo/addons/delivery_multi_destination/__manifest__.py,sha256=yUYzjFDgYAncHzRRbIxhIm_mOXorWmzoXabxX0gDVXM,646
+odoo/addons/delivery_multi_destination/__manifest__.py,sha256=_YPttKso3Q2KuR3y-Qk1eNWf-KZT0LohbnI-ZcA5t28,646
 odoo/addons/delivery_multi_destination/demo/delivery_carrier_demo.xml,sha256=8B4KyxiIkHNsfKVjP5GmInxWHacxOpv4UnhUSI1rg18,3753
 odoo/addons/delivery_multi_destination/i18n/cs_CZ.po,sha256=Gy90AL5-iA9bSzCVk_x83-uC14HTtNy-6cet7lVxOJc,5186
 odoo/addons/delivery_multi_destination/i18n/de.po,sha256=YMzrA3CrCYt5WpmDOWnWwHWlLdHTGnBPSPjh8yOlvUA,5059
 odoo/addons/delivery_multi_destination/i18n/delivery_multi_destination.pot,sha256=WyvMx-WYO-Yaqxq-BB6W3xyvQ0qGiRTIH6M3tfXBo18,4577
 odoo/addons/delivery_multi_destination/i18n/es.po,sha256=NoD6gp6tVm5monYPyIC57gskO8rnA7zss-fp-BNQSJ4,5204
 odoo/addons/delivery_multi_destination/i18n/fr.po,sha256=SG4tDQJEr3Sl_Z9agYRo0ynL9XjVobmYSF9zBAh_N-Y,4877
 odoo/addons/delivery_multi_destination/i18n/it.po,sha256=bz6k13ms6DW81gg8XFBQYswGcf0ETxnsW_0o70y_ht8,4879
 odoo/addons/delivery_multi_destination/i18n/nl.po,sha256=IqNJr-phqOD3N012UyS5i9f3DQfPN3qPDhOA_N-FsXs,4877
 odoo/addons/delivery_multi_destination/i18n/nl_NL.po,sha256=fikck4zgmwKf3MYgTh41O2JBUasrtW09Jpl5hQV1dds,4886
 odoo/addons/delivery_multi_destination/i18n/pt_BR.po,sha256=RDj42GxX0bTT9G09RAcN1cTNDAMiRk0NEtRZfyvHYrA,5390
 odoo/addons/delivery_multi_destination/i18n/sl.po,sha256=_3ENaKvSpzNj9YgTcewlKXj3AI9e6Hhc2_iGU6lZO9A,5006
 odoo/addons/delivery_multi_destination/i18n/zh_CN.po,sha256=H-BZaqv1GF2iSJJ-TIhB2dLKGztd3w05XJwvPNSRYpI,5042
 odoo/addons/delivery_multi_destination/models/__init__.py,sha256=-K4wh1XVA03SZzTTycr_kcgawLtJanP54sq4kwHL5eA,97
-odoo/addons/delivery_multi_destination/models/delivery_carrier.py,sha256=rMVK8JnJ-A6M3XzuKPtzPtuLfxu4AiB8gt2r8XkwE3E,4631
+odoo/addons/delivery_multi_destination/models/delivery_carrier.py,sha256=Y4R1nplPOyjCKBxzQJPY3_lCRgGH4ysKSIJhUa3bq8o,5097
 odoo/addons/delivery_multi_destination/readme/CONFIGURE.rst,sha256=7ODOGLMD-pk4sqqbXT2EEvsJ-rafrnQz4Xwe3WeD9Xk,386
 odoo/addons/delivery_multi_destination/readme/CONTRIBUTORS.rst,sha256=xn49GML1WnTpw8B7l_7JnwEaHAkBb1lKzGbq-tz4y0g,186
 odoo/addons/delivery_multi_destination/readme/DESCRIPTION.rst,sha256=zGE7V1m8-nd6FcVva5rSgmnD1i8gOQoIP_4aMeHKEGE,383
 odoo/addons/delivery_multi_destination/readme/ROADMAP.rst,sha256=mFUYDdJtYvVAOcxbnU3uIEAb5pCfyvKC-FoOFbx_9ko,129
 odoo/addons/delivery_multi_destination/readme/USAGE.rst,sha256=1L4dwqAZ4L8oNQMO90fp64D4_IVf1AEpBGpun6HNFDo,153
 odoo/addons/delivery_multi_destination/static/description/icon.png,sha256=6xBPJauaFOF0KDHfHgQopSc28kKvxMaeoQFQWZtfZDo,9455
 odoo/addons/delivery_multi_destination/static/description/index.html,sha256=iZ-sX-0p0Mqbp6RNbGmMtIBOA-CqqfJfjivVrw2gVqo,13822
 odoo/addons/delivery_multi_destination/tests/__init__.py,sha256=84QCPauC2-TkXZsq1euuy3oNLYJpiocgsAVkUqpUsLI,112
 odoo/addons/delivery_multi_destination/tests/test_delivery_multi_destination.py,sha256=YrDNTmQfT3XDyh1prJT8bvdT152BwvZjy_-zuswwn4Q,7294
 odoo/addons/delivery_multi_destination/views/delivery_carrier_view.xml,sha256=Siw-zvIILJk30kjkBUDsMOx6_jz_i2GfnckbwrActXs,4339
-odoo_addon_delivery_multi_destination-15.0.1.0.1.dist-info/METADATA,sha256=HKLZzpO5uR6urkoxug_luYPzn5pKf2wjrHAWTjiOBEs,4614
-odoo_addon_delivery_multi_destination-15.0.1.0.1.dist-info/WHEEL,sha256=2wepM1nk4DS4eFpYrW1TTqPcoGNfHhhO_i5m4cOimbo,92
-odoo_addon_delivery_multi_destination-15.0.1.0.1.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
-odoo_addon_delivery_multi_destination-15.0.1.0.1.dist-info/RECORD,,
+odoo_addon_delivery_multi_destination-15.0.1.0.2.dist-info/METADATA,sha256=xBCY8HTtlYnGrhjCtLQDQebyQ7J7-1aaZpsce_l4BDE,4614
+odoo_addon_delivery_multi_destination-15.0.1.0.2.dist-info/WHEEL,sha256=2wepM1nk4DS4eFpYrW1TTqPcoGNfHhhO_i5m4cOimbo,92
+odoo_addon_delivery_multi_destination-15.0.1.0.2.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
+odoo_addon_delivery_multi_destination-15.0.1.0.2.dist-info/RECORD,,
```

