# Comparing `tmp/dashscope-1.1.1-py3-none-any.whl.zip` & `tmp/dashscope-1.2.0-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,45 +1,47 @@
-Zip file size: 52214 bytes, number of entries: 43
--rw-r--r--  2.0 unx      909 b- defN 23-May-16 06:21 dashscope/__init__.py
+Zip file size: 53720 bytes, number of entries: 45
+-rw-r--r--  2.0 unx      990 b- defN 23-May-30 06:21 dashscope/__init__.py
 -rw-r--r--  2.0 unx    13474 b- defN 23-May-16 06:21 dashscope/cli.py
 -rw-r--r--  2.0 unx     3445 b- defN 23-Mar-30 08:43 dashscope/deployment.py
 -rw-r--r--  2.0 unx     3753 b- defN 23-Mar-30 08:43 dashscope/file.py
 -rw-r--r--  2.0 unx     4808 b- defN 23-Mar-30 08:43 dashscope/finetune.py
 -rw-r--r--  2.0 unx     1696 b- defN 23-Mar-30 08:43 dashscope/model.py
--rw-r--r--  2.0 unx       22 b- defN 23-May-24 01:51 dashscope/version.py
+-rw-r--r--  2.0 unx       22 b- defN 23-May-31 02:36 dashscope/version.py
 -rw-r--r--  2.0 unx      239 b- defN 23-May-16 06:21 dashscope/aigc/__init__.py
 -rw-r--r--  2.0 unx     8844 b- defN 23-May-17 12:24 dashscope/aigc/conversation.py
 -rw-r--r--  2.0 unx     5064 b- defN 23-May-17 12:24 dashscope/aigc/generation.py
 -rw-r--r--  2.0 unx     7669 b- defN 23-May-16 06:21 dashscope/aigc/image_synthesis.py
 -rw-r--r--  2.0 unx        0 b- defN 23-Mar-23 09:23 dashscope/api_entities/__init__.py
 -rw-r--r--  2.0 unx    10361 b- defN 23-Apr-06 08:21 dashscope/api_entities/aiohttp_request.py
--rw-r--r--  2.0 unx     5310 b- defN 23-Apr-05 17:08 dashscope/api_entities/api_request_data.py
+-rw-r--r--  2.0 unx     5331 b- defN 23-May-30 06:21 dashscope/api_entities/api_request_data.py
 -rw-r--r--  2.0 unx     4057 b- defN 23-Apr-06 03:24 dashscope/api_entities/api_request_factory.py
 -rw-r--r--  2.0 unx      928 b- defN 23-May-24 01:18 dashscope/api_entities/base_request.py
 -rw-r--r--  2.0 unx     8130 b- defN 23-May-16 06:21 dashscope/api_entities/dashscope_response.py
 -rw-r--r--  2.0 unx     9457 b- defN 23-May-16 06:21 dashscope/api_entities/http_request.py
 -rw-r--r--  2.0 unx     8798 b- defN 23-Apr-05 03:15 dashscope/api_entities/sync_http_request.py
 -rw-r--r--  2.0 unx    15705 b- defN 23-May-16 06:21 dashscope/api_entities/websocket_request.py
 -rw-r--r--  2.0 unx       35 b- defN 23-Mar-23 09:23 dashscope/audio/__init__.py
 -rw-r--r--  2.0 unx       75 b- defN 23-Apr-04 06:54 dashscope/audio/asr/__init__.py
 -rw-r--r--  2.0 unx     6946 b- defN 23-Apr-04 01:24 dashscope/audio/asr/transcribe.py
 -rw-r--r--  2.0 unx     5103 b- defN 23-Apr-10 06:30 dashscope/audio/asr/transcription.py
 -rw-r--r--  2.0 unx        0 b- defN 23-Mar-23 09:23 dashscope/client/__init__.py
 -rw-r--r--  2.0 unx    25911 b- defN 23-May-16 06:21 dashscope/client/base_api.py
 -rw-r--r--  2.0 unx        0 b- defN 23-Mar-23 09:23 dashscope/common/__init__.py
 -rw-r--r--  2.0 unx     1986 b- defN 23-Mar-23 09:23 dashscope/common/api_key.py
--rw-r--r--  2.0 unx     2215 b- defN 23-May-16 06:21 dashscope/common/constants.py
+-rw-r--r--  2.0 unx     2249 b- defN 23-May-30 06:21 dashscope/common/constants.py
 -rw-r--r--  2.0 unx      869 b- defN 23-Apr-10 12:54 dashscope/common/env.py
 -rw-r--r--  2.0 unx     1592 b- defN 23-May-16 06:21 dashscope/common/error.py
 -rw-r--r--  2.0 unx      984 b- defN 23-Mar-23 09:23 dashscope/common/logging.py
 -rw-r--r--  2.0 unx     4038 b- defN 23-May-16 06:21 dashscope/common/utils.py
+-rw-r--r--  2.0 unx       69 b- defN 23-May-30 06:21 dashscope/embeddings/__init__.py
+-rw-r--r--  2.0 unx     1666 b- defN 23-May-30 06:21 dashscope/embeddings/text_embedding.py
 -rw-r--r--  2.0 unx        0 b- defN 23-Mar-23 09:23 dashscope/io/__init__.py
--rw-r--r--  2.0 unx     2781 b- defN 23-Mar-30 11:54 dashscope/io/input_output.py
+-rw-r--r--  2.0 unx     3941 b- defN 23-May-30 06:21 dashscope/io/input_output.py
 -rw-r--r--  2.0 unx        0 b- defN 23-Mar-23 09:23 dashscope/protocol/__init__.py
 -rw-r--r--  2.0 unx      561 b- defN 23-Mar-23 09:23 dashscope/protocol/websocket.py
--rw-r--r--  2.0 unx    11413 b- defN 23-May-24 01:51 dashscope-1.1.1.dist-info/LICENSE
--rw-r--r--  2.0 unx     7201 b- defN 23-May-24 01:51 dashscope-1.1.1.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 23-May-24 01:51 dashscope-1.1.1.dist-info/WHEEL
--rw-r--r--  2.0 unx       50 b- defN 23-May-24 01:51 dashscope-1.1.1.dist-info/entry_points.txt
--rw-r--r--  2.0 unx       10 b- defN 23-May-24 01:51 dashscope-1.1.1.dist-info/top_level.txt
-?rw-rw-r--  2.0 unx     3681 b- defN 23-May-24 01:51 dashscope-1.1.1.dist-info/RECORD
-43 files, 188212 bytes uncompressed, 46300 bytes compressed:  75.4%
+-rw-r--r--  2.0 unx    11413 b- defN 23-May-31 02:36 dashscope-1.2.0.dist-info/LICENSE
+-rw-r--r--  2.0 unx     7201 b- defN 23-May-31 02:36 dashscope-1.2.0.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 23-May-31 02:36 dashscope-1.2.0.dist-info/WHEEL
+-rw-r--r--  2.0 unx       50 b- defN 23-May-31 02:36 dashscope-1.2.0.dist-info/entry_points.txt
+-rw-r--r--  2.0 unx       10 b- defN 23-May-31 02:36 dashscope-1.2.0.dist-info/top_level.txt
+?rw-rw-r--  2.0 unx     3863 b- defN 23-May-31 02:36 dashscope-1.2.0.dist-info/RECORD
+45 files, 191425 bytes uncompressed, 47514 bytes compressed:  75.2%
```

## zipnote {}

```diff
@@ -93,38 +93,44 @@
 
 Filename: dashscope/common/logging.py
 Comment: 
 
 Filename: dashscope/common/utils.py
 Comment: 
 
+Filename: dashscope/embeddings/__init__.py
+Comment: 
+
+Filename: dashscope/embeddings/text_embedding.py
+Comment: 
+
 Filename: dashscope/io/__init__.py
 Comment: 
 
 Filename: dashscope/io/input_output.py
 Comment: 
 
 Filename: dashscope/protocol/__init__.py
 Comment: 
 
 Filename: dashscope/protocol/websocket.py
 Comment: 
 
-Filename: dashscope-1.1.1.dist-info/LICENSE
+Filename: dashscope-1.2.0.dist-info/LICENSE
 Comment: 
 
-Filename: dashscope-1.1.1.dist-info/METADATA
+Filename: dashscope-1.2.0.dist-info/METADATA
 Comment: 
 
-Filename: dashscope-1.1.1.dist-info/WHEEL
+Filename: dashscope-1.2.0.dist-info/WHEEL
 Comment: 
 
-Filename: dashscope-1.1.1.dist-info/entry_points.txt
+Filename: dashscope-1.2.0.dist-info/entry_points.txt
 Comment: 
 
-Filename: dashscope-1.1.1.dist-info/top_level.txt
+Filename: dashscope-1.2.0.dist-info/top_level.txt
 Comment: 
 
-Filename: dashscope-1.1.1.dist-info/RECORD
+Filename: dashscope-1.2.0.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## dashscope/__init__.py

```diff
@@ -5,18 +5,20 @@
 from dashscope.aigc.generation import Generation
 from dashscope.aigc.image_synthesis import ImageSynthesis
 from dashscope.audio.asr.transcription import Transcription
 from dashscope.common.api_key import save_api_key
 from dashscope.common.env import (api_key, api_key_file_path,
                                   base_http_api_url, base_websocket_api_url)
 from dashscope.deployment import Deployment
+from dashscope.embeddings.text_embedding import TextEmbedding
 from dashscope.file import File
 from dashscope.finetune import FineTune
 from dashscope.model import Model
 
 __all__ = [
     base_http_api_url, base_websocket_api_url, api_key, api_key_file_path,
     save_api_key, Conversation, Generation, History, HistoryItem,
-    ImageSynthesis, Transcription, File, Deployment, FineTune, Model
+    ImageSynthesis, Transcription, File, Deployment, FineTune, Model,
+    TextEmbedding
 ]
 
 logging.getLogger(__name__).addHandler(NullHandler())
```

## dashscope/version.py

```diff
@@ -1 +1 @@
-__version__ = '1.1.1'
+__version__ = '1.2.0'
```

## dashscope/api_entities/api_request_data.py

```diff
@@ -28,15 +28,15 @@
         self._input_type = {}
         self._input_generators = {}
         self.parameters = {}
         self._form = form
         self._api_protocol = api_protocol
         self._is_binary_input = is_binary_input
 
-        if api_protocol == ApiProtocol.HTTP:
+        if api_protocol in [ApiProtocol.HTTP, ApiProtocol.HTTPS]:
             self._input_resolver = InputResolver(input_instance=self._input)
         else:
             self._input_resolver = InputResolver(input_instance=self._input,
                                                  is_encode_binary=False)
 
     def add_parameters(self, **params):
         for key, value in params.items():
```

## dashscope/common/constants.py

```diff
@@ -17,15 +17,15 @@
 DASHSCOPE_LOGGING_LEVEL_ENV = 'DASHSCOPE_LOGGING_LEVEL'
 # task config keys.
 PROMPT = 'prompt'
 NEGATIVE_PROMPT = 'negative_prompt'
 HISTORY = 'history'
 CUSTOMIZED_MODEL_ID = 'customized_model_id'
 IMAGES = 'images'
-
+TEXT_EMBEDDING_INPUT_KEY = 'texts'
 SERVICE_503_MESSAGE = 'Service temporarily unavailable, possibly overloaded or not ready.'  # noqa E501
 WEBSOCKET_ERROR_CODE = 44
 SSE_CONTENT_TYPE = 'text/event-stream'
 
 REPEATABLE_STATUS = [
     HTTPStatus.SERVICE_UNAVAILABLE, HTTPStatus.GATEWAY_TIMEOUT
 ]
```

## dashscope/io/input_output.py

```diff
@@ -19,14 +19,26 @@
             return resolve_input(self._instance, self._is_encode_binary,
                                  self._custom_type_resolver)
 
     def __iter__(self):
         return self
 
 
+def _is_binary_file(bytes):
+    # solution from: https://stackoverflow.com/questions/898669/
+    # how-can-i-detect-if-a-file-is-binary-non-text-in-python/7392391#7392391
+    text_chars = bytearray({7, 8, 9, 10, 12, 13, 27}
+                           | set(range(0x20, 0x100)) - {0x7f})
+    if len(bytes) > 1024:
+        temp_bytes = bytes[:1024]
+    else:
+        temp_bytes = bytes
+    return bool(temp_bytes.translate(None, text_chars))
+
+
 def resolve_input(input, is_encode_binary, custom_type_resolver: dict = {}):
     """Resolve input data, if same field is file, generator, we can get data.
 
     Args:
         input (object): object
         is_encode_binary (bool): is encode binary, websocket support binary,
             no need encode.
@@ -64,18 +76,36 @@
         return input
     elif isinstance(input, (bytearray, bytes, memoryview)):
         if is_encode_binary:
             return base64.b64encode(input).decode('ascii')
         else:
             return input
     elif isinstance(input, io.IOBase):
+        # if file is binary, encoded based on is_encode_binary
+        # websocket is_encode_binary is false, http True.
+        # text file if is_encode_binary will return line of file.
+        # otherwise return origin content.
         content = input.read()
         if not content:
-            raise StopIteration  # read file end.
-        return content
+            raise StopIteration
+        if isinstance(content, bytes):
+            is_binary_file = _is_binary_file(content)
+            if is_binary_file:
+                if is_encode_binary:
+                    return base64.b64encode(content).decode('ascii')
+                else:
+                    return content
+            else:  # split line by line.
+                return content.decode('utf-8').splitlines()
+        else:
+            if is_encode_binary:
+                return content.splitlines()
+            else:
+                return content
+
     elif isinstance(input, Generator):
         output = next(input)
         return resolve_input(output, is_encode_binary, custom_type_resolver)
     elif type(input) in custom_type_resolver:
         return custom_type_resolver[type(input)](input)
     else:
         raise UnsupportedDataType('Unsupported atom data type: %s' %
```

## Comparing `dashscope-1.1.1.dist-info/LICENSE` & `dashscope-1.2.0.dist-info/LICENSE`

 * *Files identical despite different names*

## Comparing `dashscope-1.1.1.dist-info/METADATA` & `dashscope-1.2.0.dist-info/METADATA`

 * *Files 0% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: dashscope
-Version: 1.1.1
+Version: 1.2.0
 Summary: dashscope client sdk library
 Home-page: https://dashscope.aliyun.com/
 Author: Alibaba
 Author-email: dashscope@alibaba-inc.com
 License: Apache 2.0
 Platform: Posix; MacOS X; Windows
 Classifier: Development Status :: 4 - Beta
```

## Comparing `dashscope-1.1.1.dist-info/RECORD` & `dashscope-1.2.0.dist-info/RECORD`

 * *Files 17% similar despite different names*

```diff
@@ -1,43 +1,45 @@
-dashscope/__init__.py,sha256=j634OmFq9eHDmXcb1fsV0cemdyjGwKRJEP7wY26bXvk,909
+dashscope/__init__.py,sha256=Uo6lr2monCnWLUmNEsXIz-VLfAqiDULpVQbyRXPIYEw,990
 dashscope/cli.py,sha256=FHz1UGh8dCDBV25FQttJM1uxZT3rNKGDp_krfCel7rY,13474
 dashscope/deployment.py,sha256=OA7FMkFTXwKDTcLLZe57_ZlCk38S29krdijy-_W64G4,3445
 dashscope/file.py,sha256=maMrfMB5_WVltYEyGN4QcAH0Xxj0eHkScisP8AXx4RQ,3753
 dashscope/finetune.py,sha256=jUj43EmwtCDYNqMvjKimuCQigG0Ux2EvZBypGcmkqHg,4808
 dashscope/model.py,sha256=kLXawzbbq4VkFFFjruz06MkuY-uEMUWCqs-4quqV7Us,1696
-dashscope/version.py,sha256=E-6wAZjiLRVInABFxrWoqdYlO_t-zVhK8XNfNnaDyzI,22
+dashscope/version.py,sha256=U3f_Jgr3zpgiYG2kLcvcT05TQsVzN9Kktg_f3Q9OZFA,22
 dashscope/aigc/__init__.py,sha256=llQdhMk9N11SKlTSAvYK-E4xT46GcXUAF51I-oDDDMM,239
 dashscope/aigc/conversation.py,sha256=H46NzB7CvCNBVFeD61bG-IBxcdfe3hjenszvI4M0AeY,8844
 dashscope/aigc/generation.py,sha256=LwyYEu-aRZGbXBilaaYQqkk2MF7Ojc1kBl-UU8nOAbI,5064
 dashscope/aigc/image_synthesis.py,sha256=zZhpny20azLinMhhvAgyLY4qHugtl1EEApJQ5vuHNZI,7669
 dashscope/api_entities/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 dashscope/api_entities/aiohttp_request.py,sha256=LpUM-BGKTHUeBnZ6cOfmdlp4-7czWLkhdNSzS2ydOh0,10361
-dashscope/api_entities/api_request_data.py,sha256=kz6_nYV1Ddx-F0MmYHAmlzetiHbV72PE5ffccR1NsKc,5310
+dashscope/api_entities/api_request_data.py,sha256=THH0jHQazlmjGId0e8-4aJG5jH71_jMm-CulGCZ6DV4,5331
 dashscope/api_entities/api_request_factory.py,sha256=4COz8WMEJOBP2_7jkW62Rua21SpoyrthCOMT0yg_z_k,4057
 dashscope/api_entities/base_request.py,sha256=y1SmJQ2csMy43y3c66BrC_usfn93XmJyhyu3Ge5aRKI,928
 dashscope/api_entities/dashscope_response.py,sha256=jaBqecBjJz1OqL_8YqfSQ328p1LPHiA4gwugDBUotVA,8130
 dashscope/api_entities/http_request.py,sha256=fP8E54rX2Sz2aiYSAqT9mEiRjtSFSy_-hBnDsfAq3dk,9457
 dashscope/api_entities/sync_http_request.py,sha256=Yn1ursuviL5enxs87hraKkUBenQLyiHDV487KKQq5A0,8798
 dashscope/api_entities/websocket_request.py,sha256=dUU6-wRP28IZQDDL_OTytQxpzKwXKMJcCijii06bheI,15705
 dashscope/audio/__init__.py,sha256=b8cHgjJF9VyvYAvEOGJykcQhLGejnOaJd6yXUlp6oH4,35
 dashscope/audio/asr/__init__.py,sha256=kgQYk8-q7lg64oBD7sRhCuZECvOWswmoA-zRoeU2aqw,75
 dashscope/audio/asr/transcribe.py,sha256=tJYu2u9qdnoTDmv__KIUDZ1u1LEc8mUX78vqacvxMtI,6946
 dashscope/audio/asr/transcription.py,sha256=niqgLGcvpsnv1LR2JFFinN7Gan92CJiMV_DrhfbY9e8,5103
 dashscope/client/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 dashscope/client/base_api.py,sha256=eAPdh02tsA7AA9ORImQQ7bMAaLe0SNuXJFbYWDoZASM,25911
 dashscope/common/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 dashscope/common/api_key.py,sha256=5Stp0odL5JSuIO3qJBp23QNppuGbqhhvKPS66qbMs0I,1986
-dashscope/common/constants.py,sha256=QJbCxQoy_uzPfVHdfLCoxPN1lfoeFORE49UweDqB2mw,2215
+dashscope/common/constants.py,sha256=4AUIydT7uZqWg0_nB2mGHR1s5LSSYpuC4Tr4wIyW930,2249
 dashscope/common/env.py,sha256=oQOZW5JyEeTSde394un2lpDJ5RBh4fMU9hBfbtrKKkc,869
 dashscope/common/error.py,sha256=zbWWjgBXWFNtyVBMQpjuLhOKN4k5XlyByrHn1yWy4Qc,1592
 dashscope/common/logging.py,sha256=ecGxylG3bWES_Xv5-BD6ep4_0Ciu7F6ZPBjiZtu9Jx4,984
 dashscope/common/utils.py,sha256=F5GOEMIzB2Sh1ohzx_nNgGKe752F92aQQpsaqFh-4nM,4038
+dashscope/embeddings/__init__.py,sha256=InVIZayFfGZq9Q13Mok6c_ocdV3PCFcbxjURBcLYMEg,69
+dashscope/embeddings/text_embedding.py,sha256=nI-d4zcuZA_tpfu7ktI5SZ8V-dGngVclZwxGFAh4qmE,1666
 dashscope/io/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
-dashscope/io/input_output.py,sha256=vLYMeKgV5JbzjTqzZv8dzAGxWqArXjq1FnBCxcmV-zg,2781
+dashscope/io/input_output.py,sha256=iZ1X1x1btdoZK2VeC9JsKkag2eaXwqfNT3Q6SrmRi2w,3941
 dashscope/protocol/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 dashscope/protocol/websocket.py,sha256=z-v6PGx3L4zYBANuC48s7SWSQSwRCDoh0zcfhv9Bf8U,561
-dashscope-1.1.1.dist-info/LICENSE,sha256=Izp5L1DF1Mbza6qojkqNNWlE_mYLnr4rmzx2EBF8YFw,11413
-dashscope-1.1.1.dist-info/METADATA,sha256=9C14dhoM8Pii7f78-AihJpJqWDPyRSHVcWKEOEc8lh4,7201
-dashscope-1.1.1.dist-info/WHEEL,sha256=G16H4A3IeoQmnOrYV4ueZGKSjhipXx8zc8nu9FGlvMA,92
-dashscope-1.1.1.dist-info/entry_points.txt,sha256=raEp5dOuj8whJ7yqZlDM8WQ5p2RfnGrGNo0QLQEnatY,50
-dashscope-1.1.1.dist-info/top_level.txt,sha256=woqavFJK9zas5xTqynmALqOtlafghjsk63Xk86powTU,10
-dashscope-1.1.1.dist-info/RECORD,,
+dashscope-1.2.0.dist-info/LICENSE,sha256=Izp5L1DF1Mbza6qojkqNNWlE_mYLnr4rmzx2EBF8YFw,11413
+dashscope-1.2.0.dist-info/METADATA,sha256=x26ZZj80h2i7W-_rYZU5UcVa90A3tdUqHLqZWePTxs0,7201
+dashscope-1.2.0.dist-info/WHEEL,sha256=G16H4A3IeoQmnOrYV4ueZGKSjhipXx8zc8nu9FGlvMA,92
+dashscope-1.2.0.dist-info/entry_points.txt,sha256=raEp5dOuj8whJ7yqZlDM8WQ5p2RfnGrGNo0QLQEnatY,50
+dashscope-1.2.0.dist-info/top_level.txt,sha256=woqavFJK9zas5xTqynmALqOtlafghjsk63Xk86powTU,10
+dashscope-1.2.0.dist-info/RECORD,,
```

